{"version":3,"file":"author-datalist.js","sources":["../src/element.js"],"sourcesContent":["class AuthorDatalistElement extends AuthorMenuElement {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      clickCount: {\n        private: true,\n        default: 0\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      find: query => (Array.from(this.options).filter(option => {\n        let value = this.hasAttribute('case-sensitive') ? option.value : option.value.toLowerCase()\n        let text = this.hasAttribute('case-sensitive') ? option.text : option.text.toLowerCase()\n        query = this.hasAttribute('case-sensitive') ? query : query.toLowerCase()\n\n        return value.indexOf(query) >= 0 || text.indexOf(query) >= 0\n      })),\n\n      hideAllOptions: () => Array.from(this.options).forEach(option => option.setAttribute('hidden', '')),\n\n      inputFocusHandler: evt => {\n        this.inputElement.addEventListener('keydown', this.PRIVATE.inputKeydownHandler)\n      },\n\n      inputKeydownHandler: evt => {\n        if (!this.open) {\n          this.PRIVATE.showAllOptions()\n          this.open = true\n          return\n        }\n\n        this.PRIVATE.keydownHandler(evt)\n      },\n\n      showAllOptions: () => Array.from(this.options).forEach(option => option.removeAttribute('hidden'))\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.inputElement.addEventListener('focus', this.PRIVATE.inputFocusHandler)\n\n        this.UTIL.registerListeners(this.inputElement, {\n          blur: evt => {\n            this.PRIVATE.clickCount = 0\n            this.inputElement.removeEventListener('keydown', this.PRIVATE.inputKeydownHandler)\n          },\n\n          click: evt => {\n            this.PRIVATE.clickCount++\n\n            if (this.PRIVATE.clickCount === 2) {\n              this.PRIVATE.showAllOptions()\n              this.open = true\n            }\n          },\n\n          input: evt => {\n            this.PRIVATE.hideAllOptions()\n            let query = this.inputElement.value\n\n            if (!query) {\n              return\n            }\n\n            let results = this.PRIVATE.find(query)\n\n            if (results.length) {\n              results.forEach(result => result.removeAttribute('hidden'))\n              this.open = true\n              return\n            }\n\n            if (this.open) {\n              this.open = false\n            }\n\n            this.PRIVATE.hideAllOptions()\n          }\n        })\n      },\n\n      disconnected: () => {\n        this.inputElement.removeEventListener('focus', this.PRIVATE.inputFocusHandler)\n      },\n\n      'options.selected': evt => this.inputElement.value = evt.detail.options[0].value\n    })\n  }\n\n  static get observedAttributes () {\n    return [...AuthorMenuElement.observedAttributes, 'case-sensitive']\n  }\n\n  get value () {\n    return this.inputElement.value\n  }\n\n  add (option, index) {\n    this.optionsElement.addOption(option, index)\n    // if (!customElements.get('author-option')) {\n    //   return console.error(`author-datalist requires author-option. Please include it in this document's <head> element.`)\n    // }\n    //\n    // if (!option.hasOwnProperty('id')) {\n    //   option.id = this.PRIVATE.generateGuid('option')\n    // }\n    //\n    // if (!option.hasOwnProperty('sourceElement') || !(option.sourceElement instanceof HTMLElement)) {\n    //   let sourceEl = document.createElement('option')\n    //\n    //   if (option.hasOwnProperty('innerHTML')) {\n    //     sourceEl.innerHTML = option.innerHTML\n    //   }\n    //\n    //   if (option.hasOwnProperty('label')) {\n    //     sourceEl.innerHTML = option.label\n    //   }\n    //\n    //   if (option.hasOwnProperty('value')) {\n    //     sourceEl.value = option.value\n    //   }\n    //\n    //   if (option.hasOwnProperty('disabled')) {\n    //     sourceEl.disabled = typeof option.disabled === 'boolean' && option.disabled\n    //   }\n    //\n    //   option.sourceElement = sourceEl\n    // }\n    //\n    // let label = option.sourceElement.getAttribute('label') || option.sourceElement.textContent.trim()\n    // let value = option.sourceElement.getAttribute('value')\n    // let disabled = option.sourceElement.disabled\n    // let authorOption = document.createElement('author-option')\n    //\n    // authorOption.style.display = 'none'\n    // authorOption.key = option.id\n    // authorOption.innerHTML = option.sourceElement.innerHTML\n    //\n    // dest.appendChild(authorOption)\n    // authorOption.addEventListener('click', evt => this.select(authorOption.key))\n    //\n    // option = {\n    //   attributes: { disabled, label, value },\n    //   id: option.id,\n    //   displayElement: authorOption,\n    //   sourceElement: option.sourceElement\n    // }\n    //\n    // if (index) {\n    //   this[`${index}`] = option.sourceElement\n    //   this.options.splice(index, 0, option)\n    //   return\n    // }\n    //\n    // this[`${this.options.length}`] = option.sourceElement\n    // this.options.push(option)\n  }\n\n  inject (input, datalist, guid) {\n    // Prevent re-injections\n    if (this.PRIVATE.injected) {\n      return\n    }\n\n    input.slot = 'input'\n    input.id = guid\n\n    this.UTIL.defineProperty('inputElement', {\n      readonly: true,\n      default: input\n    })\n\n    this.appendChild(this.inputElement)\n    super.inject(datalist)\n  }\n}\n\ncustomElements.define('author-datalist', AuthorDatalistElement)\n\nexport default AuthorDatalistElement\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;UAAA,MAAM,qBAAqB,SAAS,iBAAiB,CAAC;EACtD,EAAE,WAAW,CAAC,GAAG;EACjB,IAAI,KAAK,CAAC,CAAC,o2BAAmB,CAAC,EAAC;;EAEhC,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC;EAC/B,MAAM,UAAU,EAAE;EAClB,QAAQ,OAAO,EAAE,IAAI;EACrB,QAAQ,OAAO,EAAE,CAAC;EAClB,OAAO;EACP,KAAK,EAAC;;EAEN,IAAI,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC;EACnC,MAAM,IAAI,EAAE,KAAK,KAAK,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,MAAM,IAAI;EAChE,QAAQ,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,WAAW,GAAE;EACnG,QAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,WAAW,GAAE;EAChG,QAAQ,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC,WAAW,GAAE;;EAEjF,QAAQ,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC;EACpE,OAAO,CAAC,CAAC;;EAET,MAAM,cAAc,EAAE,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;;EAEzG,MAAM,iBAAiB,EAAE,GAAG,IAAI;EAChC,QAAQ,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAC;EACvF,OAAO;;EAEP,MAAM,mBAAmB,EAAE,GAAG,IAAI;EAClC,QAAQ,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;EACxB,UAAU,IAAI,CAAC,OAAO,CAAC,cAAc,GAAE;EACvC,UAAU,IAAI,CAAC,IAAI,GAAG,KAAI;EAC1B,UAAU,MAAM;EAChB,SAAS;;EAET,QAAQ,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,GAAG,EAAC;EACxC,OAAO;;EAEP,MAAM,cAAc,EAAE,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;EACxG,KAAK,EAAC;;EAEN,IAAI,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE;EACtC,MAAM,SAAS,EAAE,MAAM;EACvB,QAAQ,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAC;;EAEnF,QAAQ,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,EAAE;EACvD,UAAU,IAAI,EAAE,GAAG,IAAI;EACvB,YAAY,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,EAAC;EACvC,YAAY,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,mBAAmB,EAAC;EAC9F,WAAW;;EAEX,UAAU,KAAK,EAAE,GAAG,IAAI;EACxB,YAAY,IAAI,CAAC,OAAO,CAAC,UAAU,GAAE;;EAErC,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,KAAK,CAAC,EAAE;EAC/C,cAAc,IAAI,CAAC,OAAO,CAAC,cAAc,GAAE;EAC3C,cAAc,IAAI,CAAC,IAAI,GAAG,KAAI;EAC9B,aAAa;EACb,WAAW;;EAEX,UAAU,KAAK,EAAE,GAAG,IAAI;EACxB,YAAY,IAAI,CAAC,OAAO,CAAC,cAAc,GAAE;EACzC,YAAY,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,MAAK;;EAE/C,YAAY,IAAI,CAAC,KAAK,EAAE;EACxB,cAAc,MAAM;EACpB,aAAa;;EAEb,YAAY,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAC;;EAElD,YAAY,IAAI,OAAO,CAAC,MAAM,EAAE;EAChC,cAAc,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,EAAC;EACzE,cAAc,IAAI,CAAC,IAAI,GAAG,KAAI;EAC9B,cAAc,MAAM;EACpB,aAAa;;EAEb,YAAY,IAAI,IAAI,CAAC,IAAI,EAAE;EAC3B,cAAc,IAAI,CAAC,IAAI,GAAG,MAAK;EAC/B,aAAa;;EAEb,YAAY,IAAI,CAAC,OAAO,CAAC,cAAc,GAAE;EACzC,WAAW;EACX,SAAS,EAAC;EACV,OAAO;;EAEP,MAAM,YAAY,EAAE,MAAM;EAC1B,QAAQ,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAC;EACtF,OAAO;;EAEP,MAAM,kBAAkB,EAAE,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK;EACtF,KAAK,EAAC;EACN,GAAG;;EAEH,EAAE,WAAW,kBAAkB,CAAC,GAAG;EACnC,IAAI,OAAO,CAAC,GAAG,iBAAiB,CAAC,kBAAkB,EAAE,gBAAgB,CAAC;EACtE,GAAG;;EAEH,EAAE,IAAI,KAAK,CAAC,GAAG;EACf,IAAI,OAAO,IAAI,CAAC,YAAY,CAAC,KAAK;EAClC,GAAG;;EAEH,EAAE,GAAG,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE;EACtB,IAAI,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAC;EAChD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,GAAG;;EAEH,EAAE,MAAM,CAAC,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE;EACjC;EACA,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;EAC/B,MAAM,MAAM;EACZ,KAAK;;EAEL,IAAI,KAAK,CAAC,IAAI,GAAG,QAAO;EACxB,IAAI,KAAK,CAAC,EAAE,GAAG,KAAI;;EAEnB,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE;EAC7C,MAAM,QAAQ,EAAE,IAAI;EACpB,MAAM,OAAO,EAAE,KAAK;EACpB,KAAK,EAAC;;EAEN,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAC;EACvC,IAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAC;EAC1B,GAAG;EACH,CAAC;;EAED,cAAc,CAAC,MAAM,CAAC,iBAAiB,EAAE,qBAAqB,CAAC;;;;;;;;"}