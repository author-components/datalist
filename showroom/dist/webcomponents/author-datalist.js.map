{"version":3,"file":"author-datalist.js","sources":["../src/element.js"],"sourcesContent":["class AuthorDatalistElement extends AuthorMenuElement {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineAttributes({\n      'case-sensitive': false\n    })\n\n    this.UTIL.definePrivateMethods({\n      hideAllOptions: () => Array.from(this.options).forEach(option => option.setAttribute('hidden', '')),\n\n      inputFocusHandler: evt => {\n        this.inputElement.addEventListener('keydown', this.PRIVATE.inputKeydownHandler)\n      },\n\n      clearFilter: () => {\n        if (this.optionsElement.hasFilter('query')) {\n          this.optionsElement.removeFilter('query')\n          this.selectedIndex = -1\n        }\n      },\n\n      filterInput: () => {\n        this.PRIVATE.clearFilter()\n\n        let query = this.inputElement.value\n\n        if (!query || query === '') {\n          this.PRIVATE.showAllOptions()\n          return this.PRIVATE.clearFilter()\n        }\n\n        this.optionsElement.addFilter('query', () => {\n          let results = this.optionsElement.find(query, this['case-sensitive'])\n\n          if (results.length) {\n            return results\n          }\n\n          return this.options\n        })\n\n        this.PRIVATE.hideAllOptions()\n\n        if (this.optionsElement.filteredOptions.length > 0) {\n          this.optionsElement.filteredOptions.forEach(option => option.hidden = false)\n          this.open = true\n        } else {\n          this.open = false\n        }\n      },\n\n      inputKeydownHandler: evt => {\n        switch (evt[this.keySource]) {\n          case 13:\n          case 'Enter':\n          case 27:\n          case 'Escape':\n          case 38:\n          case 'ArrowUp':\n          case 40:\n          case 'ArrowDown':\n            break\n\n          case 32:\n          case ' ':\n            return\n\n          case 8:\n          case 'Backspace':\n            if (this.inputElement.value.length === 1) {\n              this.open = false\n            }\n\n            break\n        }\n\n        this.PRIVATE.keydownHandler(evt)\n      },\n\n      showAllOptions: () => Array.from(this.options).forEach(option => option.removeAttribute('hidden'))\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.UTIL.registerListeners(this.inputElement, {\n          focus: this.PRIVATE.inputFocusHandler,\n\n          blur: evt => {\n            this.inputElement.removeEventListener('keydown', this.PRIVATE.inputKeydownHandler)\n          },\n\n          click: evt => this.open = true,\n\n          input: evt => {\n            this.PRIVATE.filterInput(evt)\n\n            if (evt.inputType.includes('delete')) {\n              this.optionsElement.unHoverAllOptions()\n            }\n          }\n        })\n\n        this.UTIL.registerListeners(window, {\n          scroll: evt => this.open = false\n        })\n      },\n\n      'options.selected': evt => {\n        let option = evt.detail.options[0]\n        this.inputElement.value = option.value\n        this.PRIVATE.filterInput()\n        this.emit('option.selected', option.displayElement)\n        this.open = false\n      },\n\n      'state.change': evt => {\n        if (evt.detail.name === 'open' && evt.detail.value && this.inputElement.value === '') {\n          this.optionsElement.unHoverAllOptions()\n        }\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return [...AuthorMenuElement.observedAttributes, 'case-sensitive']\n  }\n\n  get value () {\n    return this.inputElement.value\n  }\n\n  add (option, index) {\n    this.optionsElement.addOption(option, index)\n  }\n\n  clear () {\n    this.inputElement.value = ''\n    this.selectedIndex = -1\n    this.PRIVATE.showAllOptions()\n  }\n\n  focus () {\n    this.inputElement.focus()\n  }\n\n  inject (input, select, guid) {\n    // Prevent re-injections\n    if (this.PRIVATE.injected) {\n      return\n    }\n\n    input.slot = 'input'\n    input.id = guid\n\n    this.UTIL.defineProperty('inputElement', {\n      readonly: true,\n      default: input\n    })\n\n    this.appendChild(this.inputElement)\n    super.inject(select)\n  }\n}\n\ncustomElements.define('author-datalist', AuthorDatalistElement)\n\nexport default AuthorDatalistElement\n"],"names":[],"mappings":"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"}